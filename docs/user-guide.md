# 用户使用指南

本指南将帮助您充分利用腾讯元宝侧边栏助手的所有功能。

## 🎯 快速开始

### 第一次使用

1. **访问腾讯元宝**

   - 在浏览器中打开 [https://chatgpt.com](https://chatgpt.com)
   - 侧边栏会自动出现在页面右侧

2. **开始对话**

   - 在腾讯元宝的输入框中输入您的问题
   - 点击发送或按回车键提交问题
   - 您的问题会自动记录在侧边栏中

3. **管理历史记录**
   - 查看侧边栏中的问题列表
   - 使用各种操作按钮管理您的问题

## 📱 界面介绍

### 侧边栏结构

```
┌─────────────────────────────┐
│  📝 问题历史          ◀    │  ← 标题栏和切换按钮
├─────────────────────────────┤
│                             │
│  问题1 [时间戳]             │  ← 问题列表
│  📋 🔄 ❌                  │     操作按钮
│                             │
│  问题2 [时间戳]             │
│  📋 🔄 ❌                  │
│                             │
│  ...                       │
│                             │
├─────────────────────────────┤
│  🗑️ 清空记录              │  ← 底部操作区
└─────────────────────────────┘
```

### 界面元素说明

#### 标题栏

- **📝 问题历史**: 侧边栏标题
- **◀/▶ 切换按钮**: 展开/收起侧边栏

#### 问题列表

- **问题文本**: 显示您提问的内容（最多 3 行）
- **时间戳**: 显示提问的时间
- **操作按钮**: 复制、重新提问、删除

#### 底部操作

- **🗑️ 清空记录**: 删除所有历史记录

## 🔧 功能详解

### 自动问题记录

#### 触发条件

侧边栏会在以下情况自动记录您的问题：

1. **输入框提交**: 在腾讯元宝输入框中输入内容并提交
2. **按钮点击**: 点击发送按钮
3. **回车键**: 在输入框中按回车键（非 Shift+回车）
4. **建议问题**: 点击页面上的建议问题按钮

#### 记录规则

- ✅ 自动去除首尾空格
- ✅ 过滤过短内容（少于 1 个字符）
- ✅ 过滤过长内容（超过 500 个字符）
- ✅ 避免重复记录相同问题
- ✅ 最多保存 50 条历史记录

### 问题操作功能

#### 📋 复制问题

**功能**: 将问题文本复制到剪贴板
**使用方法**:

1. 点击问题项右侧的 📋 按钮
2. 系统提示"问题已复制到剪贴板"
3. 在任意位置按 `Ctrl+V` 粘贴

**兼容性**: 支持现代浏览器的 Clipboard API，降级支持传统复制方法

#### 🔄 重新提问

**功能**: 将历史问题重新填入当前输入框
**使用方法**:

1. 点击问题项右侧的 🔄 按钮
2. 问题文本自动填入腾讯元宝的输入框
3. 可以直接发送或进行修改后发送

**智能识别**: 自动识别页面中的各种输入框类型（textarea、input、contenteditable）

#### ❌ 删除问题

**功能**: 从历史记录中删除单个问题
**使用方法**:

1. 点击问题项右侧的 ❌ 按钮
2. 问题立即从列表中移除
3. 系统提示"问题已删除"

**注意**: 删除操作不可撤销，请谨慎操作

### 侧边栏控制

#### 展开/收起切换

**方法 1 - 按钮操作**:

- 点击标题栏右侧的 ◀/▶ 按钮
- 收起时侧边栏仅显示 40px 宽的切换区域

**方法 2 - 快捷键**:

- 按 `Ctrl+Shift+S` (Windows/Linux)
- 按 `Cmd+Shift+S` (Mac)
- 在页面任意位置都可使用

**状态保存**: 侧边栏的展开/收起状态会自动保存，下次访问时恢复

### 历史记录管理

#### 清空所有记录

**使用方法**:

1. 点击底部的"🗑️ 清空记录"按钮
2. 确认对话框中点击"确定"
3. 所有历史记录被清空

**安全提示**: 清空操作不可撤销，建议定期备份重要问题

#### 数据导入导出（油猴脚本版本）

**导出历史记录**:

1. 右键点击油猴图标，选择脚本菜单
2. 点击"导出历史记录"
3. 自动下载 JSON 格式的备份文件

**导入历史记录**:

1. 在脚本菜单中选择"导入历史记录"
2. 选择之前导出的 JSON 文件
3. 确认导入操作

**文件格式**:

```json
{
  "version": "1.0.0",
  "exportTime": "2024-01-15T10:30:00.000Z",
  "questions": [
    {
      "id": 1705312200000,
      "text": "如何提高工作效率？",
      "timestamp": "2024/1/15 18:30:00"
    }
  ]
}
```

## ⌨️ 快捷键大全

| 快捷键         | 功能                | 适用版本        |
| -------------- | ------------------- | --------------- |
| `Ctrl+Shift+S` | 切换侧边栏显示/隐藏 | 插件版 + 脚本版 |
| `Ctrl+C`       | 复制选中的问题文本  | 通用            |
| `Ctrl+V`       | 粘贴复制的问题      | 通用            |
| `Enter`        | 在输入框中提交问题  | 通用            |
| `Shift+Enter`  | 在输入框中换行      | 通用            |

## 🎨 个性化设置

### 主题适配

#### 自动主题切换

- 侧边栏会根据系统主题偏好自动切换明暗模式
- 支持 `prefers-color-scheme` CSS 媒体查询

#### 明亮主题

- 白色背景，深色文字
- 蓝紫色渐变标题栏
- 适合白天使用

#### 暗色主题

- 深灰色背景，浅色文字
- 深蓝紫色渐变标题栏
- 适合夜间使用

### 响应式设计

#### 桌面端 (>1200px)

- 侧边栏宽度: 320px
- 收起宽度: 40px
- 从右侧滑入/滑出

#### 中等屏幕 (768px-1200px)

- 侧边栏宽度: 280px
- 收起宽度: 40px
- 优化的按钮和间距

#### 移动端 (<768px)

- 侧边栏占满屏幕宽度
- 从顶部滑入/滑出
- 触摸优化的交互设计

### 无障碍支持

#### 高对比度模式

- 支持 `prefers-contrast: high` 媒体查询
- 增强边框和背景对比度
- 提高可读性

#### 减少动画模式

- 支持 `prefers-reduced-motion: reduce` 媒体查询
- 禁用动画效果
- 提供更稳定的视觉体验

#### 键盘导航

- 所有按钮支持 Tab 键导航
- 支持回车键和空格键激活
- 清晰的焦点指示器

## 🔍 高级技巧

### 问题管理策略

#### 分类整理

虽然侧边栏不支持文件夹功能，但您可以通过以下方式整理问题：

1. **使用标签**: 在问题前添加标签，如"[工作] 如何提高效率？"
2. **时间分组**: 利用时间戳按日期查找相关问题
3. **关键词搜索**: 在浏览器中使用 Ctrl+F 搜索特定内容

#### 问题优化

为了更好地管理历史记录，建议：

1. **简洁明了**: 提问时尽量简洁明了
2. **避免重复**: 检查是否已有类似问题
3. **定期清理**: 删除不再需要的问题
4. **及时备份**: 定期导出重要问题

### 多设备同步

#### Chrome 插件版本

- 数据存储在本地浏览器中
- 不同设备间数据不同步
- 建议使用油猴脚本版本实现跨设备同步

#### 油猴脚本版本

- 支持导出/导入功能
- 可以手动在设备间同步数据
- 未来可能支持云端同步

### 性能优化

#### 存储空间管理

- 默认最多保存 50 条记录
- 超出限制时自动删除最旧记录
- 可通过修改代码调整限制数量

#### 内存使用优化

- 使用虚拟滚动处理大量数据
- 延迟加载历史记录
- 智能的 DOM 更新策略

## 🐛 故障排除

### 常见问题解决

#### 问题 1: 侧边栏不显示

**可能原因**:

- 插件未正确安装
- 页面 URL 不匹配
- JavaScript 被禁用

**解决方案**:

1. 检查插件是否启用
2. 确认在腾讯元宝网站上
3. 刷新页面重试
4. 检查浏览器控制台错误

#### 问题 2: 问题未被记录

**可能原因**:

- 输入内容过短或过长
- 提交方式不被识别
- DOM 结构发生变化

**解决方案**:

1. 确保问题长度适中（1-500 字符）
2. 使用标准的发送按钮或回车键
3. 等待 1-2 秒让脚本处理
4. 手动刷新侧边栏

#### 问题 3: 样式显示异常

**可能原因**:

- CSS 冲突
- 浏览器兼容性问题
- 缓存问题

**解决方案**:

1. 清除浏览器缓存
2. 禁用其他可能冲突的插件
3. 更新浏览器到最新版本
4. 重新安装插件/脚本

#### 问题 4: 快捷键不工作

**可能原因**:

- 快捷键被其他程序占用
- 焦点不在页面上
- 浏览器安全限制

**解决方案**:

1. 确保页面获得焦点
2. 检查是否有快捷键冲突
3. 尝试点击页面后再使用快捷键
4. 使用鼠标操作作为替代

### 调试模式

#### 开启调试信息

在浏览器控制台中输入以下代码：

```javascript
// 查看当前存储的问题
console.log("Chrome插件版本:");
chrome.storage.local.get(["yuanbao_questions_history"], console.log);

// 油猴脚本版本
console.log("油猴脚本版本:");
console.log(GM_getValue("yuanbao_questions_history", "[]"));

// 手动触发问题提取
window.dispatchEvent(new CustomEvent("yuanbao-debug-extract"));
```

#### 性能监控

```javascript
// 监控侧边栏性能
console.time("sidebar-render");
// ... 执行操作 ...
console.timeEnd("sidebar-render");
```

## 📊 使用统计

### 数据统计功能

虽然插件不会上传任何数据，但您可以通过以下方式了解使用情况：

#### 本地统计

- 历史记录总数
- 最常使用的操作
- 平均问题长度

#### 导出分析（油猴脚本）

导出的 JSON 文件包含：

- 问题创建时间分布
- 问题长度统计
- 使用频率分析

## 🔮 未来功能

### 计划中的功能

1. **云端同步**: 支持多设备间数据同步
2. **问题分类**: 添加标签和分类功能
3. **搜索功能**: 在历史记录中搜索特定内容
4. **导出格式**: 支持更多导出格式（PDF、Word 等）
5. **智能推荐**: 基于历史记录推荐相关问题
6. **统计面板**: 显示详细的使用统计信息

### 功能投票

如果您希望优先开发某个功能，请在 GitHub 项目中：

1. 查看现有的 Feature Request
2. 为您感兴趣的功能投票
3. 提交新的功能建议

## 💡 使用建议

### 最佳实践

1. **定期备份**: 使用导出功能定期备份重要问题
2. **合理分类**: 使用标签或前缀组织问题
3. **及时清理**: 删除不再需要的历史记录
4. **善用快捷键**: 熟练使用快捷键提高效率
5. **关注更新**: 及时更新到最新版本

### 效率提升技巧

1. **批量操作**: 一次性处理多个相似问题
2. **模板问题**: 保存常用的问题模板
3. **快速访问**: 使用快捷键快速切换侧边栏
4. **组合使用**: 结合腾讯元宝的其他功能使用

---

希望这份用户指南能帮助您更好地使用腾讯元宝侧边栏助手！如有任何疑问，请查看 [安装指南](installation-guide.md) 或联系技术支持。
